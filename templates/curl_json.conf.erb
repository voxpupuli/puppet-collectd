# Generated by Puppet
LoadPlugin "curl_json"

<Plugin "curl_json">
<%- if @url.start_with? '/' -%>
  <Sock "<%= @url %>">
<%- else -%>
  <URL "<%= @url %>">
<%- end -%>
    Instance "<%= @instance %>"
<% if @interval -%>
    Interval <%= @interval %>
<% end -%>
<% if @user -%>
    User "<%= @user %>"
    Password "<%= @password %>"
<% end -%>
<% unless @verifypeer.nil? -%>
    VerifyPeer <%= @verifypeer %>
<% end -%>
<% unless @verifyhost.nil? -%>
    VerifyHost <%= @verifyhost %>
<% end -%>
<% if @cacert -%>
    CACert "<%= @cacert %>"
<% end -%>
<% if @header -%>
    Header "<%= @header %>"
<% end -%>
<% @keys.sort.each do |key,keydata| -%>
    <Key "<%= key %>">
      Type "<%= keydata['type'] %>"
<% if keydata['instance'] -%>
      Instance "<%= keydata['instance'] %>"
<% end -%>
    </Key>
<% end -%>
<%- if @url.start_with? '/' -%>
  </Sock>
<%- else -%>
  </URL>
<%- end -%>
</Plugin>

